{"ast":null,"code":"var _jsxFileName = \"/Users/andrewpk/Desktop/newProj/bug-squasher/client/src/components/UserLogin/UserLogin.js\";\nimport React from \"react\";\nimport axios from \"axios\";\naxios.defaults.withCredentials = true;\nexport default class LoginUser extends React.Component {\n  constructor(props) {\n    super(props);\n    this.onChangeUserUsername = this.onChangeUserUsername.bind(this);\n    this.onChangeUserPassword = this.onChangeUserPassword.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.goToCreateUser = this.goToCreateUser.bind(this);\n    this.changeLogin = this.changeLogin.bind(this);\n    this.state = {\n      userUsername: '',\n      userPassword: '',\n      userLoginFailed: false,\n      userSubFailed: false\n    };\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n\n    if (!this.state.userUsername.trim().length || !this.state.userPassword.trim().length) {\n      this.clearPopups();\n      this.setState({\n        userSubFailed: true\n      });\n      return;\n    }\n\n    const loginUser = {\n      userUsername: this.state.userUsername,\n      userPassword: this.state.userPassword\n    };\n    axios.post('http://localhost:4000/bsDb/admin/login', loginUser).then(res => {\n      if (res.data.result === \"Username Not Found\") {\n        this.setState({\n          userLoginFailed: true\n        });\n        return;\n      } else if (res.data.result === \"Password Incorrect\") {\n        this.setState({\n          userLoginFailed: true\n        });\n        return;\n      } else {\n        this.changeLogin(res.data);\n        console.log(\"Successful login\");\n        this.props.history.push('/');\n        return;\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  goToCreateUser(e) {\n    this.props.history.push('/createUser');\n  }\n\n  clearPopups() {\n    this.setState({\n      userLoginFailed: false,\n      userSubFailed: false\n    });\n  }\n\n  changeLogin(loginSuccess) {\n    this.props.changeLoginState(loginSuccess);\n  }\n\n  onChangeUserUsername(e) {\n    this.clearPopups();\n    this.setState({\n      userUsername: e.target.value\n    });\n  }\n\n  onChangeUserPassword(e) {\n    this.clearPopups();\n    this.setState({\n      userPassword: e.target.value\n    });\n  }\n  /**\n   * Gives feedback if a user has been recently added/refused\n   */\n\n\n  addResponseForSubmission() {\n    if (this.state.userLoginFailed) {\n      return React.createElement(\"div\", {\n        className: \"alert alert-danger form-group\",\n        role: \"alert\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, \"Login failed.  Invalid username/password.\");\n    } else if (this.state.userSubFailed) {\n      return React.createElement(\"div\", {\n        className: \"alert alert-danger form-group\",\n        role: \"alert\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, \"Login failed.  Please leave no boxes blank.\");\n    } else {\n      return;\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      style: {\n        marginTop: 15\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \"Login\"), React.createElement(\"form\", {\n      onSubmit: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: this.state.userNameTaken ? \"errorLit\" : \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \"Username: \"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      value: this.state.userUsername,\n      onChange: this.onChangeUserUsername,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: this.state.passwordsNotMatch ? \"errorLit\" : \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, \"Password: \"), React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-control\",\n      value: this.state.userPassword,\n      onChange: this.onChangeUserPassword,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-inline form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Login\",\n      className: \"btn btn-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }), this.addResponseForSubmission())), React.createElement(\"form\", {\n      onSubmit: this.goToCreateUser,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Create New Account\",\n      className: \"btn btn-secondary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }))));\n  }\n\n}","map":{"version":3,"sources":["/Users/andrewpk/Desktop/newProj/bug-squasher/client/src/components/UserLogin/UserLogin.js"],"names":["React","axios","defaults","withCredentials","LoginUser","Component","constructor","props","onChangeUserUsername","bind","onChangeUserPassword","onSubmit","goToCreateUser","changeLogin","state","userUsername","userPassword","userLoginFailed","userSubFailed","e","preventDefault","trim","length","clearPopups","setState","loginUser","post","then","res","data","result","console","log","history","push","catch","err","loginSuccess","changeLoginState","target","value","addResponseForSubmission","render","marginTop","userNameTaken","passwordsNotMatch"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\naxios.defaults.withCredentials = true;\n\nexport default class LoginUser extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.onChangeUserUsername = this.onChangeUserUsername.bind(this);\n        this.onChangeUserPassword = this.onChangeUserPassword.bind(this);\n        this.onSubmit = this.onSubmit.bind(this);\n        this.goToCreateUser = this.goToCreateUser.bind(this);\n        this.changeLogin = this.changeLogin.bind(this);\n\n        this.state = {\n            userUsername: '',\n            userPassword: '',\n            userLoginFailed: false,\n            userSubFailed: false,\n        }\n    }\n\n    onSubmit(e) {\n        e.preventDefault();\n\n        if(!this.state.userUsername.trim().length ||\n           !this.state.userPassword.trim().length) {\n            this.clearPopups();\n            this.setState( {\n                userSubFailed: true,\n            });\n            return;\n        }\n\n        const loginUser = {\n            userUsername: this.state.userUsername,\n            userPassword: this.state.userPassword,\n        };\n\n        axios.post('http://localhost:4000/bsDb/admin/login', loginUser)\n            .then(res => {\n                if(res.data.result === \"Username Not Found\") {\n                    this.setState( {\n                        userLoginFailed: true\n                    });\n                    return;\n                }\n                else if(res.data.result === \"Password Incorrect\") {\n                    this.setState( {\n                        userLoginFailed: true\n                    });\n                    return;\n                }\n                else {\n                    this.changeLogin(res.data);\n                    console.log(\"Successful login\");\n                    this.props.history.push('/'); \n                    return;\n                }\n            })\n            .catch(err => {\n                console.log(err);\n            });\n\n    }\n\n    goToCreateUser(e) {\n        this.props.history.push('/createUser'); \n    }\n\n    clearPopups() {\n        this.setState({\n            userLoginFailed: false,\n            userSubFailed: false,\n        })\n    }\n\n    changeLogin(loginSuccess) {\n        this.props.changeLoginState(loginSuccess);\n    }\n\n    onChangeUserUsername(e) {\n        this.clearPopups();\n        this.setState({\n            userUsername: e.target.value,\n        });\n    }\n\n    onChangeUserPassword(e) {\n        this.clearPopups();\n        this.setState({\n            userPassword: e.target.value,\n        });\n    }\n\n    /**\n     * Gives feedback if a user has been recently added/refused\n     */\n    addResponseForSubmission() {\n        if(this.state.userLoginFailed) {\n            return (\n                <div className=\"alert alert-danger form-group\" role=\"alert\">\n                    Login failed.  Invalid username/password.\n                </div>\n            );\n        }\n        else if(this.state.userSubFailed) {\n            return (\n                <div className=\"alert alert-danger form-group\" role=\"alert\">\n                     Login failed.  Please leave no boxes blank.\n                 </div>\n            );\n        }\n        else {\n            return;\n        }        \n     }\n\n    render() {\n        return(\n            <div style={{marginTop: 15}}>\n                <h3>Login</h3>\n                <form onSubmit={this.onSubmit}>\n                    <div className=\"form-group\">\n                        <label className = {this.state.userNameTaken ? \"errorLit\" : \"\"}>Username: </label>\n                        <input  type=\"text\"\n                                className=\"form-control\"\n                                value={this.state.userUsername}\n                                onChange={this.onChangeUserUsername} \n                        />\n                    </div>\n                    <div className=\"form-group\">\n                        <label className = {this.state.passwordsNotMatch ? \"errorLit\" : \"\"}>Password: </label>\n                        <input  type=\"password\"\n                                className=\"form-control\"\n                                value={this.state.userPassword}\n                                onChange={this.onChangeUserPassword} \n                        />\n                    </div>\n                    <div className=\"form-inline form-group\">\n                        <input type=\"submit\" value=\"Login\" className=\"btn btn-primary\" />\n                        {this.addResponseForSubmission()}\n                    </div>\n                </form>\n                <form onSubmit={this.goToCreateUser}>\n                    <div className=\"form-group\">\n                        <input type=\"submit\" value=\"Create New Account\" className=\"btn btn-secondary\" />\n                    </div>\n                </form>\n            </div>\n        );\n    }\n\n}"]},"metadata":{},"sourceType":"module"}